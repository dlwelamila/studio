{
  "entities": {
    "Helper": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Helper",
      "type": "object",
      "description": "Represents a service provider on the tasKey platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Helper entity, matches Firebase Auth UID."
        },
        "phoneNumber": {
          "type": "string",
          "description": "The helper's primary phone number for registration and communication."
        },
        "email": {
          "type": "string",
          "description": "Optional email address for the helper.",
          "format": "email"
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the helper."
        },
        "profilePhotoUrl": {
          "type": "string",
          "description": "URL of the helper's profile photo.",
          "format": "uri"
        },
        "serviceCategories": {
          "type": "array",
          "description": "An array of service categories the helper provides (e.g., Laundry, Cleaning).",
          "items": {
            "type": "string"
          }
        },
        "serviceAreas": {
          "type": "array",
          "description": "An array of service areas (ward / neighborhood) the helper operates in.",
          "items": {
            "type": "string"
          }
        },
        "aboutMe": {
          "type": "string",
          "description": "A short 'About me' description provided by the helper."
        },
        "references": {
          "type": "string",
          "description": "Optional references provided by the helper."
        },
        "additionalSkills": {
          "type": "string",
          "description": "Optional additional skills listed by the helper."
        },
        "verificationStatus": {
          "type": "string",
          "description": "The verification status of the helper.",
          "enum": [
            "Pending Verification",
            "Verified"
          ]
        },
        "isAvailable": {
          "type": "boolean",
          "description": "Indicates if the helper is currently available for tasks."
        },
        "reliabilityIndicator": {
          "type": "string",
          "description": "Indicator of the helper's reliability (e.g., 'Bronze', 'Silver', 'Gold')."
        },
        "memberSince": {
          "type": "string",
          "format": "date-time"
        },
        "completedTasks": {
            "type": "number"
        },
        "rating": {
            "type": "number"
        }
      },
      "required": [
        "id",
        "phoneNumber",
        "fullName",
        "profilePhotoUrl",
        "serviceCategories",
        "serviceAreas",
        "aboutMe",
        "verificationStatus",
        "isAvailable",
        "memberSince",
        "reliabilityIndicator"
      ]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer who posts tasks on the tasKey platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Customer entity, matches Firebase Auth UID."
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the customer."
        },
        "phoneNumber": {
          "type": "string",
          "description": "The customer's phone number for contact."
        },
        "email": {
          "type": "string",
          "description": "The customer's email address.",
          "format": "email"
        },
        "rating": {
          "type": "number",
          "description": "Average rating given by helpers to this customer."
        },
        "profilePhotoUrl": {
          "type": "string",
          "description": "URL of the customer's profile photo.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "fullName",
        "phoneNumber",
        "profilePhotoUrl"
      ]
    },
    "Task": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Task",
      "type": "object",
      "description": "Represents a task posted by a customer on the tasKey platform.",
      "properties": {
        "customerId": {
          "type": "string",
          "description": "Reference to the Customer who posted the task."
        },
        "title": {
          "type": "string",
          "description": "The title of the task."
        },
        "category": {
          "type": "string",
          "description": "The category of the task (e.g., Laundry, Cleaning)."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the task."
        },
        "area": {
          "type": "string",
          "description": "The approximate area where the task needs to be performed."
        },
        "location": {
            "type": "object",
            "description": "Exact location, only revealed after assignment."
        },
        "budget": {
          "type": "object",
          "properties": {
            "min": { "type": "number" },
            "max": { "type": "number" }
          },
          "description": "The budget range for the task."
        },
        "effort": {
          "type": "string",
          "description": "The expected effort level.",
          "enum": ["light", "medium", "heavy"]
        },
        "timeWindow": {
          "type": "string",
          "description": "The preferred time window for the task to be completed."
        },
        "status": {
          "type": "string",
          "description": "The current status of the task.",
           "enum": ["OPEN", "ASSIGNED", "IN_PROGRESS", "COMPLETED", "CANCELLED"]
        },
        "assignedHelperId": {
          "type": "string",
          "description": "Reference to Helper assigned to this task."
        },
        "createdAt": {
            "type": "string",
            "format": "date-time"
        },
        "completedAt": {
            "type": "string",
            "format": "date-time"
        }
      },
      "required": [
        "customerId",
        "title",
        "category",
        "description",
        "area",
        "effort",
        "timeWindow",
        "status",
        "createdAt",
        "budget"
      ]
    },
    "Offer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Offer",
      "type": "object",
      "description": "Represents an offer submitted by a helper for a specific task.",
      "properties": {
        "helperId": {
          "type": "string",
          "description": "Reference to the Helper who made the offer."
        },
        "taskId": {
          "type": "string",
          "description": "Reference to the Task the offer is for."
        },
        "price": {
          "type": "number",
          "description": "The price offered by the helper for the task."
        },
        "eta": {
          "type": "string",
          "description": "The helper's estimated time of arrival (ETA) or availability."
        },
        "message": {
          "type": "string",
          "description": "A short message from the helper to the customer."
        },
        "status": {
          "type": "string",
          "description": "The status of the offer.",
          "enum": ["ACTIVE", "WITHDRAWN", "ACCEPTED", "REJECTED"]
        },
        "createdAt": {
            "type": "string",
            "format": "date-time"
        }
      },
      "required": [
        "helperId",
        "taskId",
        "price",
        "eta",
        "message",
        "status",
        "createdAt"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review given by a customer for a completed task.",
      "properties": {
        "taskId": {
          "type": "string",
          "description": "Reference to the completed Task."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to the Customer who gave the review."
        },
        "helperId": {
          "type": "string",
          "description": "Reference to the Helper who received the review."
        },
        "rating": {
          "type": "number",
          "description": "The rating given by the customer (e.g., 1 to 5 stars)."
        },
        "feedback": {
          "type": "string",
          "description": "Short feedback provided by the customer."
        }
      },
      "required": [
        "taskId",
        "customerId",
        "helperId",
        "rating",
        "feedback"
      ]
    }
  },
  "auth": {
    "providers": [
      "phone",
      "email"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/helpers/{helperId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Helper"
          },
          "description": "Stores helper profiles. Only the authenticated helper can access and modify their own profile. The document ID corresponds to the Firebase Auth UID.",
          "params": [
            {
              "name": "helperId",
              "description": "The Firebase Auth UID of the helper."
            }
          ]
        }
      },
      {
        "path": "/customers/{customerId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Customer"
          },
          "description": "Stores customer profiles. The document ID corresponds to the Firebase Auth UID.",
          "params": [
            {
              "name": "customerId",
              "description": "The Firebase Auth UID of the customer."
            }
          ]
        }
      },
      {
        "path": "/tasks/{taskId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Task"
          },
          "description": "Stores task details. Accessible for listing to all authenticated helpers. Write access is restricted.",
          "params": [
            {
              "name": "taskId",
              "description": "Unique identifier for the task."
            }
          ]
        }
      },
      {
        "path": "/tasks/{taskId}/offers/{offerId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Offer"
          },
          "description": "Stores offers made by helpers for specific tasks. Includes denormalized 'helperId' and 'taskId' for authorization independence.",
          "params": [
            {
              "name": "taskId",
              "description": "The ID of the task the offer is for."
            },
            {
              "name": "offerId",
              "description": "Unique identifier for the offer."
            }
          ]
        }
      },
      {
        "path": "/reviews/{reviewId}",
        "definition": {
          "schema": {
            "$ref": "#/entities/Review"
          },
          "description": "Stores reviews for completed tasks. Readable by all authenticated users.",
          "params": [
            {
              "name": "reviewId",
              "description": "Unique identifier for the review."
            }
          ]
        }
      }
    ]
  }
}
    